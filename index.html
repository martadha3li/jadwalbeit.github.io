<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¨ÙŠØª</title>
<style>
body{font-family:Tahoma;background:#f2f4f8;margin:0;padding:20px;}
h1{text-align:center;color:#1e88e5;margin-bottom:20px;}
.card{background:white;padding:15px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.1);margin-bottom:20px;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
th,td{border:1px solid #ddd;padding:8px;text-align:center;}
th{background:#e3f2fd;}
button{padding:8px 15px;border:none;border-radius:6px;background:#1e88e5;color:white;cursor:pointer;margin:5px 0;}
button:hover{background:#1565c0;}
.adminPanel{display:none;background:#fff3cd;padding:15px;border-radius:8px;margin-bottom:20px;}
input,select,textarea{width:100%;padding:6px;margin:5px 0;}
</style>
</head>
<body>

<h1>ğŸ“… Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¨ÙŠØª</h1>

<div class="card">
<button onclick="setWeek(1)">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„</button>
<button onclick="setWeek(2)">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ</button>
<button onclick="showAdmin()">ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
</div>

<div class="card">
<h3>ğŸ½ Ø¬Ø¯ÙˆÙ„ ØºØ³ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠÙ†</h3>
<div id="dishesTable"></div>
</div>

<div class="card">
<h3>ğŸš½ Ø¬Ø¯ÙˆÙ„ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø­Ù…Ø§Ù…Ø§Øª</h3>
<div id="bathTable"></div>
</div>

<div class="adminPanel" id="adminPanel">
<h3>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h3>

<label>Ø¥Ø¶Ø§ÙØ© Ø´Ø®Øµ Ø¬Ø¯ÙŠØ¯:</label>
<input id="newPerson" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ">
<button onclick="addPerson()">â• Ø¥Ø¶Ø§ÙØ©</button>

<label>Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø´Ø®Øµ Ù…Ø¤Ù‚Øª:</label>
<select id="excludePerson"></select>
<button onclick="toggleExclude()">âš¡ ØªÙØ¹ÙŠÙ„/Ø¥Ù„ØºØ§Ø¡</button>

<label>ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ:</label>
<input id="newPass" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯">
<button onclick="saveSettings()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
</div>

<script>
let adminPassword = localStorage.getItem("pass") || "112233";
let currentWeek = 1;

// Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø´Ø®Ø§Øµ
let persons = ["Ø§Ù„Ø²ÙŠØ¯","Ø§Ù„Ù…Ø­ÙŠØ³Ù†","Ø§Ù„Ø³ÙŠØ§Ø­ÙŠ","Ø§Ù„Ù…ÙˆØ³Ù‰","Ø£ÙƒØ±Ù…","Ø§Ù„Ø´ÙŠØ®","Ø§Ù„ØºØ§ÙÙ„ÙŠ"];
let excluded = [];

function setWeek(w){currentWeek=w;generateTables();}

function generateTables(){
let dishesWeek1 = [
["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø²ÙŠØ¯"],
["Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø³ÙŠØ§Ø­ÙŠ"],
["Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø£ÙƒØ±Ù…"],
["Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„ØºØ§ÙÙ„ÙŠ"]
];

let dishesWeek2 = [
["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø²ÙŠØ¯"],
["Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ù…Ø­ÙŠØ³Ù†"],
["Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø´ÙŠØ®"],
["Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ù…ÙˆØ³Ù‰"]
];

let bathWeek1 = [
["Ø­Ù…Ø§Ù… 1","Ø§Ù„Ù†Ø§ØµØ±"],
["Ø­Ù…Ø§Ù… 2","Ø¨ÙˆØ§Ù…ÙŠØ±"],
["Ø­Ù…Ø§Ù… 3","Ø£ÙƒØ±Ù…"]
];

let bathWeek2 = [
["Ø­Ù…Ø§Ù… 1","Ø­Ø³Ù†"],
["Ø­Ù…Ø§Ù… 2","Ø§Ù„Ù…Ø­ÙŠØ³Ù†"],
["Ø­Ù…Ø§Ù… 3","Ø§Ù„Ù…ÙˆØ³Ù‰"]
];

// ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª
function applyExclusion(arr){
return arr.map(([day,person])=>[day,excluded.includes(person)?"â€”":person]);
}

let dishes = currentWeek==1 ? dishesWeek1 : dishesWeek2;
let baths = currentWeek==1 ? bathWeek1 : bathWeek2;

dishes = applyExclusion(dishes);
baths = applyExclusion(baths);

let dHTML = "<table><tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</th></tr>";
dishes.forEach(row=>{dHTML += `<tr><td>${row[0]}</td><td>${row[1]}</td></tr>`;});
dHTML += "</table>";

let bHTML = "<table><tr><th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th><th>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</th></tr>";
baths.forEach(row=>{bHTML += `<tr><td>${row[0]}</td><td>${row[1]}</td></tr>`;});
bHTML += "</table>";

document.getElementById("dishesTable").innerHTML=dHTML;
document.getElementById("bathTable").innerHTML=bHTML;

// ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª
let select = document.getElementById("excludePerson");
select.innerHTML = "";
persons.forEach(p=>{let opt = document.createElement("option"); opt.value=p; opt.text=p; select.appendChild(opt);});
}

function showAdmin(){
let pass = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ");
if(pass===adminPassword){
document.getElementById("adminPanel").style.display="block";
alert("ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„");
}else{alert("Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø®Ø§Ø·Ø¦");}
}

function saveSettings(){
let newPass = document.getElementById("newPass").value;
if(newPass){adminPassword = newPass; localStorage.setItem("pass",newPass);}
alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª");
}

function addPerson(){
let name = document.getElementById("newPerson").value.trim();
if(name && !persons.includes(name)){persons.push(name);generateTables();document.getElementById("newPerson").value="";}
}

function toggleExclude(){
let name = document.getElementById("excludePerson").value;
if(excluded.includes(name)){excluded = excluded.filter(p=>p!==name);}else{excluded.push(name);}
generateTables();
}

// Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…
window.onload=function(){
generateTables();
let today = new Date().getDay(); // Ø§Ù„Ø£Ø­Ø¯=0 ... Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡=3
let dayMap = ["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡"];
if(today>=0 && today<=3){
alert("ğŸ“Œ Ø§Ù„ÙŠÙˆÙ… "+dayMap[today]+" Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§ØªÙƒÙ… Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„");
}
}
</script>

</body>
</html>
